<html layout:decorate="~{layout}">
<link rel="stylesheet" type="text/css" th:href="@{/bootstrap.min.css}">
<nav th:replace="~{navbar :: navbarFragment}"></nav>

<script th:if="${message != null}" th:inline="javascript">
    alert([[${message}]]);
</script>

<div layout:fragment="content" class="container my-3">
    <div class="my-3 border-bottom">
        <h4>사용자 정보 수정</h4>
    </div>

    <form th:action="@{/user/profile/edit}" method="post">
        <div class="mb-3">
            <label>아이디</label>
            <input type="text" class="form-control" th:value="${user.username}" readonly>
        </div>
        <div class="mb-3">
            <label>이메일</label>
            <input type="email" name="email" class="form-control" th:value="${user.email}" required>
        </div>
		
		<!-- 기존 비밀번호 -->
		<div class="mb-3">
		    <label>현재 비밀번호 <span class="text-danger">*</span></label>
		    <input type="password" name="currentPassword" class="form-control" required>
		</div>

		<!-- 새 비밀번호 (선택사항) -->
		<div class="mb-3">
		    <label>새 비밀번호</label>
		    <input type="password" name="password1" class="form-control">
		</div>
		<div class="mb-3">
		    <label>새 비밀번호 확인</label>
		    <input type="password" name="password2" class="form-control">
		</div>

        <button type="submit" class="btn btn-primary">저장</button>
        <a href="/user/profile" class="btn btn-secondary">취소</a>
    </form>
</div>


<script th:if="${errorMessage != null}" th:inline="javascript">
    alert([[${errorMessage}]]);
</script>

</html>